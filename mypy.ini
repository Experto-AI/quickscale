# Shared mypy configuration for QuickScale monorepo
# This configuration is used by all packages unless overridden

[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True
show_error_codes = True

# Note: django-stubs plugin is NOT enabled globally because each module has its own settings.
# For module-specific mypy runs, set DJANGO_SETTINGS_MODULE env var and use --config-file with
# the module's pyproject.toml or a custom mypy.ini that enables the plugin.

# Override for test files
[mypy-tests.*]
disallow_untyped_defs = False
check_untyped_defs = False

# Third-party libraries without type stubs
[mypy-allauth.*]
ignore_missing_imports = True

[mypy-markdownx.*]
ignore_missing_imports = True

[mypy-django_filters.*]
ignore_missing_imports = True

# Django model fields don't need explicit type annotations when using django-stubs
# These patterns are for modules that use Django models
[mypy-quickscale_modules_auth.*]
# Allow untyped model field definitions (Django handles this via metaclass)
disallow_untyped_defs = False
warn_return_any = False
warn_unused_ignores = False

[mypy-quickscale_modules_blog.*]
disallow_untyped_defs = False
warn_return_any = False
warn_unused_ignores = False
# Django models have class-level field definitions without explicit type hints
disable_error_code = var-annotated

[mypy-quickscale_modules_listings.*]
disallow_untyped_defs = False
warn_return_any = False
warn_unused_ignores = False
# Django models have class-level field definitions without explicit type hints
disable_error_code = var-annotated
